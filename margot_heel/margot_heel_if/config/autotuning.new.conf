<margot>


	<block name="foo">

		<!-- MONITOR SECTION -->

		<monitor name="my_temperature_monitor" type="Temperature">
			<expose var_name="avg_temperature" what="average" />
		</monitor>

		<monitor name="my_throughput_monitor" type="Throughput">
			<stop>
				<param name="num_job_done">
					<local_var name="data" type="double" />
				</param>
			</stop>
			<expose var_name="avg_throughput" what="average" />
		</monitor>

		<monitor name="my_quality_monitor" type="custom">
			<spec>
				<header reference="margot/monitor.hpp" />
				<class name="margot::monitor_t&lt;double&gt;" />
				<type name="double" />
				<stop_method name="push" />
			</spec>
			<stop>
				<param name="quality">
					<local_var name="quality" type="double" />
				</param>
			</stop>
			<expose var_name="avg_quality" what="average" />
		</monitor>


		<!-- GOAL SECTION -->
		<goal name="my_throughput_goal" monitor="my_throughput_monitor" dFun="Average" cFun="GT" value="25" />
		<goal name="my_quality_goal" monitor="my_quality_monitor" dFun="Average" cFun="GT" value="0.6" />


		<!-- SW-KNOB SECTION -->
		<knob name="num_threads" var_name="threads" var_type="int"/>
		<knob name="num_trials" var_name="trials" var_type="int"/>



		<!-- OPTIMIZATION SECTION -->
		<state name="my_optimization" starting="yes" >
			<minimize combination="linear">
				<metric name="temperature" coef="1.0"/>
			</minimize>
			<subject to="my_throughput_goal" metric_name="throughput" priority="10" />
			<subject to="my_quality_goal" metric_name="quality" priority="20" />
		</state>


	</block>




</margot>
